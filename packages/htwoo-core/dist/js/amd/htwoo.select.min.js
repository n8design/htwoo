define(["exports"],(function(e){"use strict";function t(){document.querySelectorAll(".hoo-optgroup").forEach((e=>{const t=e.querySelectorAll(".hoo-option"),o=Array.from(t).some((e=>"none"!==e.style.display));e.style.display=o?"":"none"}))}t();const o=new MutationObserver((()=>{t()}));document.querySelector(".hoo-select-dropdown")&&o.observe(document.querySelector(".hoo-select-dropdown"),{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}),e.ariaSelect=e=>{console.debug("ariaSelect",e);const t=e;console.log("csSelector",t);const o=t.querySelector("input"),n=t.querySelector("ul"),i=n.querySelectorAll("li.hoo-option");t.querySelectorAll("svg");const r=document.querySelector("#custom-select-status"),s=Array.from(i);let a="initial";function c(e){"Open"===e?(n.classList.remove("hidden-all"),t.setAttribute("aria-expanded","true")):(n.classList.add("hidden-all"),t.setAttribute("aria-expanded","false"))}function l(){return document.activeElement}function u(e,t){const n=s.filter((function(e){if(""===e.style.display)return!0}));if(0!==n.length)switch("input"===t&&o.focus(),e){case o:"forward"===t?n[0].focus():"back"===t&&n[n.length-1].focus();break;case i[0]:"forward"===t?n[1].focus():"back"===t&&o.focus();break;case i[i.length-1]:"forward"===t?n[0].focus():"back"===t&&n[n.length-2].focus();break;default:const e=l(),r=n.indexOf(e);if("forward"===t){n[r+1].focus()}else if("back"===t&&r>0){n[r-1].focus()}else o.focus()}}function d(){const e=o.value,t=s.filter((function(t){if(t.innerText.toUpperCase().startsWith(e.toUpperCase()))return!0}));var n;console.debug(t),i.forEach((e=>e.style.display="none")),t.forEach((function(e){e.style.display=""})),p("filtered"),n=t.length,r.textContent=n+" options available."}function f(e){const t=e.dataset.value;o.value=t,u(document.activeElement,"input")}function p(e){switch(e){case"initial":a="initial";break;case"opened":a="opened";break;case"filtered":a="filtered";break;case"closed":a="closed"}}t.setAttribute("role","combobox"),t.setAttribute("aria-haspopup","listbox"),t.setAttribute("aria-owns","custom-select-list"),o.setAttribute("aria-autocomplete","both"),o.setAttribute("aria-controls","custom-select-list"),n.setAttribute("role","listbox"),i.forEach((e=>{e.setAttribute("role","option"),e.setAttribute("tabindex","-1")})),r.textContent=i.length+" options available. Arrow down to browse or start typing to filter.",c("Shut"),t.addEventListener("click",(function(e){const t=l();switch(a){case"initial":c("Open"),p("opened");break;case"opened":t===o?(c("Shut"),p("initial")):"LI"===t.tagName&&(f(t),c("Shut"),p("closed"));break;case"filtered":"LI"===t.tagName&&(f(t),c("Shut"),p("closed"));break;case"closed":c("Open"),p("filtered")}})),t.addEventListener("keyup",(function(e){!function(e){const t=l();switch(e){case"Enter":"initial"===a?(c("Open"),p("opened")):"opened"===a&&"LI"===t.tagName?(f(t),c("Shut"),p("closed")):"opened"===a&&t===o?(c("Shut"),p("closed")):"filtered"===a&&"LI"===t.tagName?(f(t),c("Shut"),p("closed")):"filtered"===a&&t===o?(c("Open"),p("opened")):(c("Open"),p("filtered"));break;case"Escape":"opened"!==a&&"filtered"!==a||(c("Shut"),p("initial"));break;case"ArrowDown":"initial"===a||"closed"===a?(c("Open"),u(o,"forward"),p("opened")):(c("Open"),u(t,"forward"));break;case"ArrowUp":"initial"===a||"closed"===a?(c("Open"),u(o,"back"),p("opened")):u(t,"back");break;default:"initial"===a?(c("Open"),d(),p("filtered")):"opened"===a||"closed"===a?(d(),p("filtered")):d()}}(e.key)})),document.addEventListener("click",(function(e){e.target.closest(".hoo-select")||(c("Shut"),p("initial"))}))}}));
