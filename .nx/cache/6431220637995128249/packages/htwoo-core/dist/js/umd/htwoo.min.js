!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";class e{#e;#t;#o;#l;#i={closer:null,backdropCloser:!0,escCloser:!0};static options={closer:null,backdropCloser:!0,escCloser:!0};static dialogType={DIALOG:"dialog",MODAL:"modal"};#r=()=>{if(console.debug("-> Fired showDialog -- ",this.#t),this.#o===e.dialogType.DIALOG)this.#t.show();else{if(this.#o!==e.dialogType.MODAL)throw new Error(`Invalid dialog type specified for ${this.#t}`);this.#t.showModal(),this.#t.addEventListener("click",this.#s)}this.#l&&this.#l.addEventListener("click",this.#n);this.#t.querySelector("[autofocus]")&&(console.debug("No Autofocus"),dialogElement.focus()),this.#t.addEventListener("keydown",this.#a)};#s=e=>{var t=this.#t.getBoundingClientRect();t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width||e.target!==this.#t||this.#t.close()};#a=e=>{27===e.keyCode&&this.#t.close()};#n=e=>{console.debug("closing dialog"),this.#t.close()};constructor(t,o,l=e.dialogType.DIALOG,i=e.options){console.debug("Register dialog",l);const r=document.querySelector(t),s=document.querySelector(o);if(!r)throw new Error(`Launcher '${t}' Element cannot be found`);if(this.#e=r,!s)throw new Error(`Dialog '${o}' Element not found`);if(this.#t=s,this.#e.addEventListener("click",this.#r),this.#o=l,void 0===i.closer?this.#i.closer=null:i.closer,void 0===i.backdropCloser?this.#i.backdropCloser=!0:i.backdropCloser,void 0===i.escCloser?this.#i.escCloser=!0:i.escCloser,this.#i=i,null!==i.closer){const e=s.querySelector(i.closer);this.#i.closer=i.closer,e&&(this.#l=e)}console.debug("AFTER LAUNCH ::: ",this.#o,this.#e,this.#t,this.#l)}}const t=e=>{console.debug("ariaSelect",e);const t=e;console.log("csSelector",t);const o=t.querySelector("input"),l=t.querySelector("ul"),i=l.querySelectorAll("li.hoo-option");t.querySelectorAll("svg");const r=document.querySelector("#custom-select-status"),s=Array.from(i);let n="initial";function a(e){"Open"===e?(l.classList.remove("hidden-all"),t.setAttribute("aria-expanded","true")):(l.classList.add("hidden-all"),t.setAttribute("aria-expanded","false"))}function c(){return document.activeElement}function d(e,t){const l=s.filter((function(e){if(""===e.style.display)return!0}));if(0!==l.length)switch("input"===t&&o.focus(),e){case o:"forward"===t?l[0].focus():"back"===t&&l[l.length-1].focus();break;case i[0]:"forward"===t?l[1].focus():"back"===t&&o.focus();break;case i[i.length-1]:"forward"===t?l[0].focus():"back"===t&&l[l.length-2].focus();break;default:const e=c(),r=l.indexOf(e);if("forward"===t){l[r+1].focus()}else if("back"===t&&r>0){l[r-1].focus()}else o.focus()}}function u(){const e=o.value,t=s.filter((function(t){if(t.innerText.toUpperCase().startsWith(e.toUpperCase()))return!0}));var l;console.debug(t),i.forEach((e=>e.style.display="none")),t.forEach((function(e){e.style.display=""})),f("filtered"),l=t.length,r.textContent=l+" options available."}function h(e){const t=e.dataset.value;o.value=t,d(document.activeElement,"input")}function f(e){switch(e){case"initial":n="initial";break;case"opened":n="opened";break;case"filtered":n="filtered";break;case"closed":n="closed"}}t.setAttribute("role","combobox"),t.setAttribute("aria-haspopup","listbox"),t.setAttribute("aria-owns","custom-select-list"),o.setAttribute("aria-autocomplete","both"),o.setAttribute("aria-controls","custom-select-list"),l.setAttribute("role","listbox"),i.forEach((e=>{e.setAttribute("role","option"),e.setAttribute("tabindex","-1")})),r.textContent=i.length+" options available. Arrow down to browse or start typing to filter.",a("Shut"),t.addEventListener("click",(function(e){const t=c();switch(n){case"initial":a("Open"),f("opened");break;case"opened":t===o?(a("Shut"),f("initial")):"LI"===t.tagName&&(h(t),a("Shut"),f("closed"));break;case"filtered":"LI"===t.tagName&&(h(t),a("Shut"),f("closed"));break;case"closed":a("Open"),f("filtered")}})),t.addEventListener("keyup",(function(e){!function(e){const t=c();switch(e){case"Enter":"initial"===n?(a("Open"),f("opened")):"opened"===n&&"LI"===t.tagName?(h(t),a("Shut"),f("closed")):"opened"===n&&t===o?(a("Shut"),f("closed")):"filtered"===n&&"LI"===t.tagName?(h(t),a("Shut"),f("closed")):"filtered"===n&&t===o?(a("Open"),f("opened")):(a("Open"),f("filtered"));break;case"Escape":"opened"!==n&&"filtered"!==n||(a("Shut"),f("initial"));break;case"ArrowDown":"initial"===n||"closed"===n?(a("Open"),d(o,"forward"),f("opened")):(a("Open"),d(t,"forward"));break;case"ArrowUp":"initial"===n||"closed"===n?(a("Open"),d(o,"back"),f("opened")):d(t,"back");break;default:"initial"===n?(a("Open"),u(),f("filtered")):"opened"===n||"closed"===n?(u(),f("filtered")):u()}}(e.key)})),document.addEventListener("click",(function(e){e.target.closest(".hoo-select")||(a("Shut"),f("initial"))}))};function o(){document.querySelectorAll(".hoo-optgroup").forEach((e=>{const t=e.querySelectorAll(".hoo-option"),o=Array.from(t).some((e=>"none"!==e.style.display));e.style.display=o?"":"none"}))}o();const l=new MutationObserver((()=>{o()}));document.querySelector(".hoo-select-dropdown")&&l.observe(document.querySelector(".hoo-select-dropdown"),{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]});const i=e=>{const t=e.target.closest("tr"),o=e.target.closest("table"),l=t.dataset.sectionheader;let i=null;i="all"===l?"tr[data-section]":"tr[data-section="+l+"]";const r=o.querySelectorAll(i);for(let e=0;e<r.length;e++){const o=r[e];o.classList.contains("is-hidden")?(o.classList.remove("is-hidden"),o.classList.add("is-visible"),o.setAttribute("aria-hidden","false"),t.setAttribute("aria-expanded","true")):(o.classList.add("is-hidden"),o.classList.remove("is-visible"),o.setAttribute("aria-hidden","true"),t.setAttribute("aria-expanded","false"))}if("all"===l){let e=document.querySelectorAll("tbody tr.collapsable");if("true"===t.getAttribute("aria-expanded"))for(let t=0;t<e.length;t++){const o=e[t];o.setAttribute("aria-hidden","false"),o.setAttribute("aria-expanded","true")}else for(let t=0;t<e.length;t++){const o=e[t];o.setAttribute("aria-hidden","true"),o.setAttribute("aria-expanded","false")}}},r="left",s=(e,t,o)=>{const l=e.querySelectorAll(t);for(let e=0;e<l.length;e++){const t=l[e];t.style[o]=t.offsetLeft+"px"}},n=()=>{document.querySelectorAll(".hoo-table.is-collapsable").forEach((e=>{e.querySelectorAll(".collapsable").forEach((e=>{e.addEventListener("click",i)}))})),(()=>{const e=document.querySelectorAll("table.sticky");for(let t=0;t<e.length;t++){const o=e[t];s(o,"tr td.is-sticky.left",r),s(o,"tr th.is-sticky.left",r)}})()},a=".hoo-pivotbar",c=".hoo-button-pivot",d=".hoo-navitem-text",u="is-active",h=e=>{e.preventDefault(),console.log(e.target);let t=e.target.classList.contains(c.substr(1))?e.target:e.target.closest(c);t||(t=e.target.classList.contains(d.substr(1))?e.target:e.target.closest(d));e.target.closest(a).querySelectorAll(c).forEach((e=>{e.classList.remove(u)})),t.classList.add(u)},f=e=>{let t=e.target;if(!t.classList.contains("hoo-buttonitem")&&!t.classList.contains("hoo-icon")){let e=t.closest(".hoo-navitem");if(e){(e=>{e.forEach((e=>{e.removeAttribute("aria-current")}))})(t.closest(".hoo-nav").querySelectorAll("* .hoo-navitem")),e.setAttribute("aria-current",!0)}}},g=e=>{let t=e.target.closest(".hoo-navitem");"true"===t.getAttribute("aria-expanded")?t.setAttribute("aria-expanded",!1):t.setAttribute("aria-expanded",!0)};class p{_files=[];_fileLable=null;_fileControl=null;_originalFileControl=null;_infileOutput=null;dragOver=e=>{e.preventDefault(),this._fileLabel.classList.add("drag-over")};dragLeave=e=>{e.preventDefault(),this._fileLabel.classList.remove("drag-over")};dragDrop=e=>{e.preventDefault(),this._fileLabel.classList.remove("drag-over");const t=e.dataTransfer.files;t.length>0&&(console.log("Files dropped:",t),this.fileChangedEvent({target:{files:t}}))};fileChangedEvent=e=>{let t;if(console.debug("FileUploadHandler.fileChanged",e),0===e.target.files.length)return void(this._infileOutput.innerHTML="");t=Array.from(e.target.files);const o=document.createElement("ul");o.classList.add("hoo-infile-list"),console.debug("FileUploadHandler",t),t.forEach((e=>{const t=document.createElement("li");t.innerText=e.name,o.appendChild(t)})),this._infileOutput.innerHTML=`<div class='hoo-infile-selection'>${this._infileOutput.title||"Files Selected"}</div>${o.outerHTML}`};constructor(e){this._fileControl=e,console.debug("FileUploadHandler",this._fileControl),this._fileLabel=e.querySelector(".hoo-infile-label"),this._fileLabel.addEventListener("dragover",this.dragOver),this._fileLabel.addEventListener("dragleave",this.dragLeave),this._fileLabel.addEventListener("drop",this.dragDrop),this._originalFileControl=this._fileControl.querySelector(".hoo-infile-context"),console.debug("FileUploadHandler",this._originalFileControl,this._originalFileControl.getAttribute("aria-describedby")),this._originalFileControl.addEventListener("change",this.fileChangedEvent);let t=this._originalFileControl.getAttribute("aria-describedby");console.debug("FileUploadHandler",t,this._infileOutput,`#${t.trim()}`),this._infileOutput=document.querySelector(`#${t.trim()}`),console.debug("Infile Output:",this._infileOutput)}}const b=[],m=(e,t)=>{e.target.parentElement.querySelectorAll(".hoo-overflow > *");((e,t,o,l)=>{let i=b[l].filter((t=>t.overallWidth>e-40)),r=b[l].filter((t=>t.overallWidth<e-40)),s=o.querySelector(".hoo-buttonicon-overflow .hoo-buttonflyout");if(s&&s.children.length<i.length)for(let e=0;e<i.length;e++)if(null!==o.querySelector("[data-ref="+i[e].ref+"]")){let t=document.createElement("li");t.appendChild(o.querySelector("[data-ref="+i[e].ref+"]")),s.appendChild(t)}var n;if(0!==s.children.length?(n=s.closest(".hoo-buttonicon-overflow"))&&n.classList.add("is-active"):(n=s.closest(".hoo-buttonicon-overflow"))&&n.classList.remove("is-active"),s&&s.children.length>i.length)for(let e=0;e<r.length;e++)if(null!==s.querySelector("[data-ref="+r[e].ref+"]")){let t=s.querySelector("[data-ref="+r[e].ref+"]");o.appendChild(t)}for(let e=0;e<s.children.length;e++)0===s.children[e].children.length&&s.children[e].remove()})(e.target.parentElement.clientWidth,0,e.target,t)},v=(e,t)=>{e.forEach(((e,t)=>{y(e.target.children,t),m(e,t)}))},y=(e,t)=>{let o=0;if(b.length<=t){b[t]=[];for(let l=0;l<e.length;l++)if(o+=e[l].clientWidth,!e[l].classList.contains("hoo-buttonicon-overflow")){let i={chlld:e[l],ref:"ref-"+t+"-"+l,width:e[l].clientWidth,overallWidth:o};e[l].dataset.ref=i.ref,b[t].push(i)}}},L=(e,t)=>{document.querySelectorAll(e).forEach((e=>{e.addEventListener("click",(e=>{t(e)}))}))},A=(e,t)=>{let o=e.getAttribute("aria-pressed");void 0===o?e.setAttribute("aria-pressed",!0):e.setAttribute("aria-pressed",!o),t.classList.toggle("show-flyout")},E=e=>{let t=e.target,o=t.parentElement;A(t,o)},S=e=>{console.log("\nEVENT: splitButtonClick");let t=e.target,o=t.parentElement;A(t,o)},w=e=>{let t=e.target,o=t.parentElement.dataset.animation;t.classList.add(o);let l=window.getComputedStyle(t),i=1e3*parseFloat(l.getPropertyValue("animation-duration"));console.log(l,l.getPropertyValue("animation-duration"),i),setTimeout((()=>{t.remove()}),i)},k=e=>{let t=e.target,o=t.parentElement.dataset.animation;t.classList.add(o);let l=document.importNode(t,!0);l.classList.add(o);let i=window.getComputedStyle(l),r=1e3*parseFloat(i.getPropertyValue("animation-duration"));e.target.parentElement.appendChild(l),l.addEventListener("click",k),console.log(i,i.getPropertyValue("animation-duration"),r),setTimeout((()=>{l.classList.remove("anim-add-slide")}),r)},C=(e,t)=>{document.querySelectorAll(e+" > .sg-anim-block").forEach((e=>{e.addEventListener("click",t)}))};var q;window.onload=((()=>{try{new e("#btn-dialog","#myDialog",e.dialogType.DIALOG,{closer:"#closer-dlg"}),new e("#btn-modal-dialog","#myDialog-1",e.dialogType.MODAL,{closer:"#closer-mdl"})}catch(e){}})(),L(".hoo-buttonsplit > .hoo-buttonsplit-carret",S),L(".hoo-buttonsplit-primary > .hoo-buttonsplit-carret",S),L("button.hoo-buttonicon-overflow",E),L("button.hoo-buttoncmd",E),L("button.hoo-buttoncmdbar",E),L("button.hoo-buttonicon-flyout",E),L("button.hoo-buttoncontext",E),C(".anim-deleteNslide",w),C(".anim-addNslide",k),q=".hoo-input-file",document.querySelectorAll(q).forEach((e=>{new p(e)})),(()=>{let e=document.querySelectorAll(".hoo-select");console.debug("ALL SELECTED",e),e&&e.forEach(((e,o)=>{console.debug(e,o),t(e)}))})(),n(),document.querySelectorAll(`${a} ${c}`).forEach((e=>{e.dataset.ref=e.textContent.trim(),e.addEventListener("click",h)})),document.querySelectorAll(".hoo-nav").forEach((e=>{e.querySelectorAll(".hoo-navitem").forEach((e=>{e.addEventListener("click",f)})),e.querySelectorAll(".hoo-buttonicon").forEach((e=>{e.addEventListener("click",g)}))})),(()=>{let e=document.querySelectorAll(".hoo-overflow");if(0!==e.length){const t=new ResizeObserver(v);e.forEach((e=>{t.observe(e)}))}})(),void setTimeout((()=>{let e=document.querySelectorAll(".tmp-hidden");console.log(e),e.forEach((t=>{t.addEventListener("focus",(t=>{t.target.classList.remove(".tmp-hidden"),console.log(e)}))}))}),1e3))}));
